import{b as se,c as de,d as ue}from"./chunk-4DUZAZHE.js";import{$a as i,Ga as ne,H as Y,Ha as ae,Ia as oe,Ja as b,Ka as g,L as D,La as _,Ma as E,Na as m,Oa as p,Pa as h,Q as f,Qa as l,R as y,Ra as s,Sa as F,Ta as V,Ua as H,Va as T,Wa as S,_a as K,a as I,ab as L,b as $,ba as Z,bb as C,c as R,ca as ee,cb as ie,db as re,eb as ce,fb as N,gb as M,ja as te,jb as le,lb as me,mb as v,nb as j,pa as r,qb as pe,rb as A,xb as U,za as d}from"./chunk-CPMRSSUB.js";var O=class t{static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-example-root"]],decls:11,vars:0,consts:[["routerLinkActive","app-st-active"],["routerLink","./display"],["routerLink","./update"]],template:function(e,a){e&1&&(m(0,"p"),i(1,"example-root works!"),p(),m(2,"nav")(3,"ul")(4,"li",0)(5,"a",1),i(6,"Display"),p()(),m(7,"li",0)(8,"a",2),i(9,"Update"),p()()()(),h(10,"router-outlet"))},dependencies:[se,de,ue],encapsulation:2,changeDetection:0})};function _e(t,n){if(t&1&&(l(0,"li")(1,"b"),i(2," Tel "),l(3,"span",1),i(4),N(5,"number"),s()(),l(6,"span",5),i(7),s()()),t&2){let e=n.$implicit,a=n.$index;r(4),L(M(5,2,a+1)),r(3),L(e)}}var W=class t{contact=v.required();number=v(NaN,{transform:A});static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-display-tel"]],hostAttrs:["role","section"],inputs:{contact:[1,"contact"],number:[1,"number"]},decls:16,vars:7,consts:[[1,"-cl-title"],[1,"-cl-label-no","app-cl-number"],[1,"-cl-data"],[1,"-cmp-tels-summary","app-cl-number"],[1,"-cmp-list"],[1,"-cl-data","app-cl-code"]],template:function(e,a){e&1&&(l(0,"header")(1,"div")(2,"h3",0)(3,"span"),i(4," Contact "),l(5,"span",1),i(6),N(7,"number"),s()(),l(8,"span",2),i(9),s()(),l(10,"span",3),i(11),N(12,"number"),s()()(),l(13,"ul",4),g(14,_e,8,4,"li",null,oe),s()),e&2&&(r(6),L(M(7,3,a.number())),r(3),L(a.contact().name),r(2),C("(",M(12,5,a.contact().tels.length),")"),r(3),_(a.contact().tels))},dependencies:[U],encapsulation:2,changeDetection:0})};function Ce(t,n){if(t&1&&(m(0,"li"),h(1,"app-display-tel",0),p()),t&2){let e=n.$implicit,a=n.$index;r(),E("contact",e)("number",a+1)}}var q=class t{contacts=v.required();static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-display-contact"]],inputs:{contacts:[1,"contacts"]},decls:11,vars:3,consts:[[3,"contact","number"]],template:function(e,a){e&1&&(m(0,"header")(1,"div")(2,"span")(3,"h2"),i(4,"Contacts"),p()(),m(5,"span"),i(6),N(7,"number"),p()()(),m(8,"ul"),g(9,Ce,2,2,"li",null,b),p()),e&2&&(r(6),C("(",M(7,1,a.contacts().length),")"),r(3),_(a.contacts()))},dependencies:[W,U],encapsulation:2,changeDetection:0})};var ve="contact-data",P=class t{keyName=`${D(te)}-${ve}`;get(){let n=localStorage.getItem(this.keyName);return JSON.parse(n??"null")}set(n){let e=JSON.stringify(n);localStorage.setItem(this.keyName,e)}static \u0275fac=function(e){return new(e||t)};static \u0275prov=Y({token:t,factory:t.\u0275fac,providedIn:"root"})};function xe(t,n){t&1&&h(0,"app-display-contact",0),t&2&&E("contacts",n)}function De(t,n){t&1&&(m(0,"p"),i(1,"Not Found"),p())}var J=class t{dataStorage=D(P);data=Z(this.dataStorage.get()??null);static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-example-display-page"]],decls:2,vars:1,consts:[[3,"contacts"]],template:function(e,a){if(e&1&&ne(0,xe,1,1,"app-display-contact",0)(1,De,2,0,"p"),e&2){let o;ae((o=a.data())?0:1,o)}},dependencies:[q],encapsulation:2,changeDetection:0})};function Q(t){return{value:t??""}}function k(t){let{name:n,tels:e}=t??{name:"",tels:[""]};return{name:n,tels:e.map(a=>Q(a))}}function fe(t){return(t??[void 0]).map(k)}function be(t){return t.value}function Ee(t){let{name:n,tels:e}=t;return{name:n,tels:e.map(be)}}function ye(t){return t.map(Ee)}function he(t,n){if(t&1){let e=F();l(0,"li")(1,"label")(2,"b"),i(3),s(),l(4,"input",3,1),T("change",function(){let o=f(e).$index,c=K(5),u=S();return y(u.changeTel(o,c.value))}),s()(),l(6,"button",4),T("click",function(){let o=f(e).$index,c=S();return y(c.removeTel(o))}),i(7,"X"),s()()}if(t&2){let e=n.$implicit,a=n.$index,o=n.$count;r(3),C("Tel ",a+1),r(),V("value",e.value)("value",e.value),r(2),V("disabled",o===1)}}var X=class t{number=v(NaN,{transform:A});contact=j(k());removable=v(!0,{transform:pe});remove=me();changeName(n){this.contact.update(e=>$(I({},e),{name:n}))}addTel(){this.contact.update(n=>{let o=n,{tels:e}=o,a=R(o,["tels"]);return $(I({},a),{tels:[...e,Q()]})})}removeTel(n){this.contact.update(e=>{let c=e,{tels:a}=c,o=R(c,["tels"]);return $(I({},o),{tels:a.filter((u,B)=>B!==n)})})}changeTel(n,e){this.contact.update(a=>{let u=a,{tels:o}=u,c=R(u,["tels"]);return $(I({},c),{tels:o.map((B,ge)=>(ge===n&&(B.value=e),B))})})}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-dynamic-tel"]],inputs:{number:[1,"number"],contact:[1,"contact"],removable:[1,"removable"]},outputs:{contact:"contactChange",remove:"remove"},decls:15,vars:4,consts:[["nameElem",""],["telElem",""],["type","button",3,"click"],["type","text",3,"change","value"],["type","button",3,"click","disabled"]],template:function(e,a){if(e&1){let o=F();l(0,"header")(1,"button",2),T("click",function(){return f(o),y(a.addTel())}),i(2,"+Tel"),s(),l(3,"label")(4,"b"),i(5),s(),l(6,"input",3,0),T("change",function(){f(o);let u=K(7);return y(a.changeName(u.value))}),s(),l(8,"span"),i(9),s()(),l(10,"button",4),T("click",function(){return f(o),y(a.remove.emit())}),i(11,"X"),s()(),l(12,"ul"),g(13,he,8,4,"li",null,b),s()}e&2&&(r(5),C("Contact",a.number()," "),r(),V("value",a.contact().name),r(3),C("(",a.contact().tels.length,")"),r(),V("disabled",!a.removable()),r(3),_(a.contact().tels))},encapsulation:2,changeDetection:0})};function Te(t,n){if(t&1){let e=F();m(0,"li")(1,"app-dynamic-tel",1),H("contactChange",function(o){let c=f(e).$index,u=S();return y(u.changeContact(c,o))})("remove",function(){let o=f(e).$index,c=S();return y(c.removeContact(o))}),p()()}if(t&2){let e=n.$implicit,a=n.$index,o=n.$count;r(),E("number",a+1)("contact",e)("removable",o>1)}}var z=class t{contacts=j([k()]);addContact(){this.contacts.update(n=>[...n,k()])}removeContact(n){this.contacts.update(e=>e.filter((a,o)=>o!==n))}changeContact(n,e){this.contacts.update(a=>a.map((o,c)=>(c===n&&(o.name=e.name,o.tels=e.tels),o)))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-dynamic-contact"]],inputs:{contacts:[1,"contacts"]},outputs:{contacts:"contactsChange"},decls:6,vars:0,consts:[["type","button",3,"click"],[3,"contactChange","remove","number","contact","removable"]],template:function(e,a){e&1&&(m(0,"header")(1,"button",0),H("click",function(){return a.addContact()}),i(2,"+ Contact"),p()(),m(3,"ul"),g(4,Te,2,3,"li",null,b),p()),e&2&&(r(4),_(a.contacts()))},dependencies:[X],encapsulation:2,changeDetection:0})};var G=class t{dataStorage=D(P);data=le(()=>fe(this.dataStorage.get()??void 0));constructor(){ee(()=>this.dataStorage.set(ye(this.data())))}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=d({type:t,selectors:[["app-example-update-page"]],decls:1,vars:1,consts:[[3,"contactsChange","contacts"]],template:function(e,a){e&1&&(m(0,"app-dynamic-contact",0),ce("contactsChange",function(c){return re(a.data,c)||(a.data=c),c}),p()),e&2&&ie("contacts",a.data)},dependencies:[z],encapsulation:2,changeDetection:0})};var _t=[{path:"",component:O,children:[{path:"",redirectTo:"display",pathMatch:"full"},{path:"display",component:J},{path:"update",component:G}]}];export{_t as default};
